package com.sirionlabs.test.pod.ca;


import com.sirionlabs.api.commonAPI.Create;
import com.sirionlabs.api.commonAPI.Show;
import com.sirionlabs.helper.EntityOperationsHelper;
import com.sirionlabs.helper.entityCreation.CreateEntity;
import com.sirionlabs.utils.commonUtils.CustomAssert;
import com.sirionlabs.utils.commonUtils.ParseJsonResponse;
import org.json.JSONObject;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import java.util.ArrayList;
import java.util.List;

public class TestClausesDefinitionsAndTemplates {
    private final static Logger logger = LoggerFactory.getLogger(TestClausesDefinitionsAndTemplates.class);
    private String entityName = "clauses";

    @DataProvider
    public Object[][] dataProviderForClauseAndDefinition(){
        List<Object[]> listOfArrays = new ArrayList<>();
        List<String> inputTextList = new ArrayList<>();
        inputTextList.add("Choice<br>Is Yours");
        inputTextList.add(null);
        for (String entity : inputTextList) {
            listOfArrays.add(new Object[]{entity});
        }
        return listOfArrays.toArray(new Object[0][]);
    }

   //Document viewer - Clause
   @Test(dataProvider = "dataProviderForClauseAndDefinition")
    public void testC152203(String inputText){
       CustomAssert customAssert = new CustomAssert();
       int clauseId = -1;
       try{
           clauseId = createClauseAndGetNewId(inputText,customAssert);
           String clauseText = showPageResponseTextForClause(inputText,clauseId, customAssert);
           if( inputText==null & clauseText.equals("")){
               logger.info("Output Text in Clause is same to the Input Text which is \"Null\"");
           }else{
               if(clauseText.equals(inputText)){
                   logger.info("Output Text in Clause is same to the Input Text");
               }else{
                   logger.error("Output Text in Clause is different than the Input Text");
                   customAssert.assertTrue(false,"Output Text in Clause is different than the Input Text");
               }
           }
       }catch(Exception e){
           logger.error("Exception occurred while comparing Input Text and Output Text in Clause of ClauseID {}",clauseId);
           customAssert.assertTrue(false,"Exception occurred while comparing Input Text and Output Text in Clause of ClauseID "+clauseId);
       }finally {
           EntityOperationsHelper.deleteEntityRecord(entityName, clauseId);
           logger.info("Clause with clause id {} is deleted.",clauseId);
       }
       customAssert.assertAll();
    }

    //Document viewer - Definition
    @Test(dataProvider = "dataProviderForClauseAndDefinition")
    public void testC152213(String inputText){
        CustomAssert customAssert = new CustomAssert();
        int definitionId = -1;
        try{
            definitionId = createClauseAndGetNewId(inputText,customAssert);
            String definitionText = showPageResponseTextForClause(inputText, definitionId, customAssert);
            if(inputText==null & definitionText.equals("")){
                logger.info("Output Text in Definition is same to the Input Text which is \"Null\"");
            }else{
                if(definitionText.equals(inputText)){
                    logger.info("Output Text in Definition is same to the Input Text");
                }else{
                    logger.error("Output Text in definition is Definition than the Input Text");
                    customAssert.assertTrue(false,"Output Text in Definition is different than the Input Text");
                }
            }
        }catch(Exception e){
            logger.error("Exception occurred while comparing Input Text and Output Text in Definition of DefinitionID {}",definitionId);
            customAssert.assertTrue(false,"Exception occurred while comparing Input Text and Output Text in Definition of DefinitionID "+definitionId);
        }finally {
            EntityOperationsHelper.deleteEntityRecord(entityName, definitionId);
            logger.info("Definition with DefinitionId {} is deleted.",definitionId);
        }
        customAssert.assertAll();
    }

    public String clausePayload(String textInClause){
       if(textInClause==null)
           return "{\"body\":{\"data\":{\"parentShortCodeId\":{\"name\":\"parentShortCodeId\",\"values\":{\"name\":\"PRS01004\",\"id\":1004},\"multiEntitySupport\":false},\"functions\":{\"name\":\"functions\",\"id\":11549,\"values\":[{\"name\":\"IT\",\"id\":1002}],\"options\":null,\"multiEntitySupport\":false},\"suppliers\":{\"name\":\"suppliers\",\"id\":7369,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"keywords\":{\"name\":\"keywords\",\"id\":7384,\"multiEntitySupport\":false},\"transactionTypes\":{\"name\":\"transactionTypes\",\"id\":7377,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"contractingClientEntities\":{\"name\":\"contractingClientEntities\",\"multiEntitySupport\":false},\"integrationSystem\":{\"name\":\"integrationSystem\",\"multiEntitySupport\":false},\"scheduleReference\":{\"name\":\"scheduleReference\",\"id\":11839,\"values\":false,\"multiEntitySupport\":false},\"parentEntityId\":{\"name\":\"parentEntityId\",\"values\":1004,\"multiEntitySupport\":false},\"recipientHubs\":{\"name\":\"recipientHubs\",\"multiEntitySupport\":false},\"type\":{\"name\":\"type\",\"id\":7370,\"options\":null,\"multiEntitySupport\":false},\"globalRegions\":{\"name\":\"globalRegions\",\"id\":7391,\"values\":[{\"name\":\"APAC\",\"id\":1002,\"parentId\":1002}],\"options\":null,\"multiEntitySupport\":false},\"globalCountries\":{\"name\":\"globalCountries\",\"id\":7392,\"values\":[{\"name\":\"Thailand\",\"id\":228,\"parentId\":1002}],\"options\":null,\"multiEntitySupport\":false},\"serviceCategory\":{\"name\":\"serviceCategory\",\"multiEntitySupport\":false},\"subHeader\":{\"name\":\"subHeader\",\"id\":12036,\"multiEntitySupport\":false},\"supplierAccess\":{\"name\":\"supplierAccess\",\"values\":false,\"multiEntitySupport\":false},\"stakeHolders\":{\"name\":\"stakeHolders\",\"values\":{\"rg_2016\":{\"values\":[{\"name\":\"Anay User\",\"id\":1044,\"type\":2,\"email\":\"srijan.samanta@sirionqa.office\",\"properties\":{\"Contact Number\":\"987654321\",\"Designation\":\"QA\",\"Default Tier\":\"View All\",\"Email\":\"srijan.samanta@sirionqa.office\",\"First Name\":\"Anay\",\"Time Zone:\":\"Asia/Kolkata (GMT +05:30)\",\"User Department\":\" - \",\"Legal Document\":\"Yes\",\"Last Name\":\"User\",\"Exclude From Filters\":\" - \",\"Business Case\":\"Yes\",\"Financial Document\":\"Yes\"}}],\"name\":\"rg_2016\",\"label\":\"Clause Manager\",\"userType\":[2,1,3,4]}},\"options\":null,\"multiEntitySupport\":false},\"canSupplierBeParent\":true,\"signatureAllowed\":{\"name\":\"signatureAllowed\",\"values\":false,\"multiEntitySupport\":false},\"subClauses\":{\"name\":\"subClauses\",\"values\":[],\"multiEntitySupport\":false},\"supplier\":{\"name\":\"supplier\",\"multiEntitySupport\":false},\"initiatives\":{\"name\":\"initiatives\",\"multiEntitySupport\":false},\"id\":{\"name\":\"id\",\"id\":7365,\"multiEntitySupport\":false},\"parentEntityIds\":{\"name\":\"parentEntityIds\",\"multiEntitySupport\":false},\"state\":{\"name\":\"state\",\"values\":{},\"multiEntitySupport\":false},\"actualParentEntityTypeId\":{\"name\":\"actualParentEntityTypeId\",\"multiEntitySupport\":false},\"contractingEntity\":{\"name\":\"contractingEntity\",\"id\":7371,\"options\":null,\"multiEntitySupport\":false},\"group\":{\"name\":\"group\",\"id\":11837,\"values\":{\"name\":\"Clause\",\"id\":1},\"options\":null,\"multiEntitySupport\":false},\"contractingHubs\":{\"name\":\"contractingHubs\",\"multiEntitySupport\":false},\"cycleTime\":{\"name\":\"cycleTime\",\"multiEntitySupport\":false},\"industryTypes\":{\"name\":\"industryTypes\",\"id\":7373,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"parentHalting\":{\"name\":\"parentHalting\",\"values\":false,\"multiEntitySupport\":false},\"weekType\":{\"name\":\"weekType\",\"multiEntitySupport\":false},\"stagingPrimaryKey\":{\"name\":\"stagingPrimaryKey\",\"multiEntitySupport\":false},\"timeZone\":{\"name\":\"timeZone\",\"multiEntitySupport\":false},\"dynamicMetadata\":{\"dyn106595\":{\"name\":\"dyn106595\",\"id\":106595,\"multiEntitySupport\":false},\"dyn106661\":{\"name\":\"dyn106661\",\"id\":106661,\"options\":null,\"multiEntitySupport\":false},\"dyn106560\":{\"name\":\"dyn106560\",\"id\":106560,\"multiEntitySupport\":false},\"dyn106576\":{\"name\":\"dyn106576\",\"id\":106576,\"multiEntitySupport\":false},\"dyn106614\":{\"name\":\"dyn106614\",\"id\":106614,\"multiEntitySupport\":false},\"dyn106645\":{\"name\":\"dyn106645\",\"id\":106645,\"multiEntitySupport\":false},\"dyn106678\":{\"name\":\"dyn106678\",\"id\":106678,\"options\":null,\"multiEntitySupport\":false}},\"formattedText\":{\"name\":\"formattedText\",\"multiEntitySupport\":false},\"leadTimes\":{\"name\":\"leadTimes\",\"multiEntitySupport\":false},\"addSubclauses\":{\"name\":\"addSubclauses\",\"id\":11229,\"values\":false,\"multiEntitySupport\":false},\"clientHoliday\":{\"name\":\"clientHoliday\",\"multiEntitySupport\":false},\"projectLevels\":{\"name\":\"projectLevels\",\"multiEntitySupport\":false},\"name\":{\"name\":\"name\",\"id\":7367,\"values\":\"API Automation 8031125\",\"multiEntitySupport\":false},\"rootInfo\":{\"name\":\"rootInfo\",\"multiEntitySupport\":false},\"overallRiskScore\":{\"name\":\"overallRiskScore\",\"multiEntitySupport\":false},\"forceTemplateRenewal\":{\"name\":\"forceTemplateRenewal\",\"id\":7383,\"multiEntitySupport\":false},\"projectId\":{\"name\":\"projectId\",\"multiEntitySupport\":false},\"status\":{\"name\":\"status\",\"id\":7366,\"values\":{},\"multiEntitySupport\":false},\"contractingMarkets\":{\"name\":\"contractingMarkets\",\"multiEntitySupport\":false},\"excludeWeekends\":{\"name\":\"excludeWeekends\",\"values\":false,\"multiEntitySupport\":false},\"companyPosition\":{\"name\":\"companyPosition\",\"id\":7374,\"options\":null,\"multiEntitySupport\":false},\"searchParam\":{\"size\":{\"name\":\"size\",\"values\":0,\"multiEntitySupport\":false},\"offset\":{\"name\":\"offset\",\"values\":0,\"multiEntitySupport\":false}},\"definitionCategories\":{\"name\":\"definitionCategories\",\"id\":11838,\"options\":null,\"multiEntitySupport\":false},\"termType\":{\"name\":\"termType\",\"id\":7372,\"options\":null,\"multiEntitySupport\":false},\"parentEntityType\":{\"name\":\"parentEntityType\",\"values\":{\"name\":\"Pre Signature\",\"id\":183},\"multiEntitySupport\":false},\"contracts\":{\"name\":\"contracts\",\"multiEntitySupport\":false},\"recipientClientEntities\":{\"name\":\"recipientClientEntities\",\"multiEntitySupport\":false},\"agreementTypes\":{\"name\":\"agreementTypes\",\"id\":7375,\"values\":[{\"name\":\"Services Agreement\",\"id\":1008}],\"options\":null,\"multiEntitySupport\":false},\"minTcv\":{\"name\":\"minTcv\",\"id\":7380,\"multiEntitySupport\":false},\"compareAllowed\":{\"name\":\"compareAllowed\",\"values\":false,\"multiEntitySupport\":false},\"tier\":{\"name\":\"tier\",\"multiEntitySupport\":false},\"adhocUser\":{\"firstName\":{\"name\":\"firstName\",\"id\":78,\"multiEntitySupport\":false},\"lastName\":{\"name\":\"lastName\",\"id\":79,\"multiEntitySupport\":false},\"loginId\":{\"name\":\"loginId\",\"id\":80,\"multiEntitySupport\":false},\"userType\":{\"name\":\"userType\",\"id\":83,\"options\":null,\"multiEntitySupport\":false},\"uniqueLoginId\":{\"name\":\"uniqueLoginId\",\"id\":82,\"multiEntitySupport\":false},\"email\":{\"name\":\"email\",\"id\":81,\"multiEntitySupport\":false}},\"vendorContractingParty\":{\"name\":\"vendorContractingParty\",\"multiEntitySupport\":false},\"riskTypes\":{\"name\":\"riskTypes\",\"id\":7389,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"draftEntity\":{\"name\":\"draftEntity\",\"values\":false,\"multiEntitySupport\":false},\"ageing\":{\"name\":\"ageing\",\"multiEntitySupport\":false},\"contractServices\":{\"name\":\"contractServices\",\"id\":7378,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"languageType\":{\"name\":\"languageType\",\"id\":12340,\"values\":{\"name\":\"English (English)\",\"id\":1},\"options\":null,\"multiEntitySupport\":false},\"actualParentEntityId\":{\"name\":\"actualParentEntityId\",\"multiEntitySupport\":false},\"sourceEntityTypeId\":{\"name\":\"sourceEntityTypeId\",\"multiEntitySupport\":false},\"filePath\":{\"name\":\"filePath\",\"multiEntitySupport\":false},\"headerLabel\":{\"name\":\"headerLabel\",\"id\":11464,\"multiEntitySupport\":false},\"recipientMarkets\":{\"name\":\"recipientMarkets\",\"id\":11846,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"addendums\":{\"name\":\"addendums\",\"values\":[],\"multiEntitySupport\":false},\"services\":{\"name\":\"services\",\"id\":11550,\"values\":[{\"name\":\"Network MNS\",\"id\":1005,\"parentId\":1002}],\"options\":null,\"multiEntitySupport\":false},\"contractCountries\":{\"name\":\"contractCountries\",\"multiEntitySupport\":false},\"clauseTags\":{\"name\":\"clauseTags\",\"id\":7382,\"multiEntitySupport\":false},\"parentEntityTypeId\":{\"name\":\"parentEntityTypeId\",\"values\":183,\"multiEntitySupport\":false},\"maxTcv\":{\"name\":\"maxTcv\",\"id\":7381,\"multiEntitySupport\":false},\"recipientCompanyCodes\":{\"name\":\"recipientCompanyCodes\",\"multiEntitySupport\":false},\"oldSystemId\":{\"name\":\"oldSystemId\",\"multiEntitySupport\":false},\"shortCodeId\":{\"name\":\"shortCodeId\",\"id\":7393,\"values\":\"CL08329\",\"multiEntitySupport\":false},\"formattingProperties\":{\"name\":\"formattingProperties\",\"id\":7388,\"multiEntitySupport\":false},\"excludeFromHoliday\":{\"name\":\"excludeFromHoliday\",\"values\":false,\"multiEntitySupport\":false},\"sourceEntityId\":{\"name\":\"sourceEntityId\",\"multiEntitySupport\":false},\"clauseText\":{\"name\":\"clauseText\",\"id\":7386,\"values\":{\"text\":\"\",\"htmlText\":\"\"},\"multiEntitySupport\":false},\"entityTypeId\":{\"name\":\"entityTypeId\",\"values\":138,\"multiEntitySupport\":false},\"comment\":{\"requestedBy\":{\"name\":\"requestedBy\",\"id\":12244,\"options\":null,\"multiEntitySupport\":false},\"shareWithSupplier\":{\"name\":\"shareWithSupplier\",\"id\":12409,\"multiEntitySupport\":false},\"comments\":{\"name\":\"comments\",\"id\":86,\"multiEntitySupport\":false},\"documentTags\":{\"name\":\"documentTags\",\"id\":12428,\"options\":null,\"multiEntitySupport\":false},\"invoiceCopy\":{\"name\":\"invoiceCopy\",\"values\":false,\"multiEntitySupport\":false},\"draft\":{\"name\":\"draft\",\"multiEntitySupport\":false},\"actualDate\":{\"name\":\"actualDate\",\"id\":12243,\"multiEntitySupport\":false},\"privateCommunication\":{\"name\":\"privateCommunication\",\"id\":12242,\"multiEntitySupport\":false},\"changeRequest\":{\"name\":\"changeRequest\",\"id\":12246,\"options\":null,\"multiEntitySupport\":false},\"workOrderRequest\":{\"name\":\"workOrderRequest\",\"id\":12247,\"multiEntitySupport\":false},\"commentDocuments\":{\"values\":[]}},\"relations\":{\"name\":\"relations\",\"multiEntitySupport\":false},\"category\":{\"name\":\"category\",\"id\":7368,\"values\":{\"name\":\"Limited Warranty\",\"id\":1200},\"options\":null,\"multiEntitySupport\":false},\"contractRegions\":{\"name\":\"contractRegions\",\"multiEntitySupport\":false},\"clauseVersion\":{\"name\":\"clauseVersion\",\"id\":12657,\"multiEntitySupport\":false},\"contractingCompanyCodes\":{\"name\":\"contractingCompanyCodes\",\"multiEntitySupport\":false},\"dyn106595\":{\"name\":\"dyn106595\",\"id\":106595,\"multiEntitySupport\":false},\"dyn106661\":{\"name\":\"dyn106661\",\"id\":106661,\"options\":null,\"multiEntitySupport\":false},\"dyn106560\":{\"name\":\"dyn106560\",\"id\":106560,\"multiEntitySupport\":false},\"dyn106576\":{\"name\":\"dyn106576\",\"id\":106576,\"multiEntitySupport\":false},\"dyn106614\":{\"name\":\"dyn106614\",\"id\":106614,\"multiEntitySupport\":false},\"dyn106645\":{\"name\":\"dyn106645\",\"id\":106645,\"multiEntitySupport\":false},\"dyn106678\":{\"name\":\"dyn106678\",\"id\":106678,\"options\":null,\"multiEntitySupport\":false}}}}";
       else
           return "{\"body\":{\"data\":{\"parentShortCodeId\":{\"name\":\"parentShortCodeId\",\"values\":{\"name\":\"PRS01004\",\"id\":1004},\"multiEntitySupport\":false},\"functions\":{\"name\":\"functions\",\"id\":11549,\"values\":[{\"name\":\"IT\",\"id\":1002}],\"options\":null,\"multiEntitySupport\":false},\"suppliers\":{\"name\":\"suppliers\",\"id\":7369,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"keywords\":{\"name\":\"keywords\",\"id\":7384,\"multiEntitySupport\":false},\"transactionTypes\":{\"name\":\"transactionTypes\",\"id\":7377,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"contractingClientEntities\":{\"name\":\"contractingClientEntities\",\"multiEntitySupport\":false},\"integrationSystem\":{\"name\":\"integrationSystem\",\"multiEntitySupport\":false},\"scheduleReference\":{\"name\":\"scheduleReference\",\"id\":11839,\"values\":false,\"multiEntitySupport\":false},\"parentEntityId\":{\"name\":\"parentEntityId\",\"values\":1004,\"multiEntitySupport\":false},\"recipientHubs\":{\"name\":\"recipientHubs\",\"multiEntitySupport\":false},\"type\":{\"name\":\"type\",\"id\":7370,\"options\":null,\"multiEntitySupport\":false},\"globalRegions\":{\"name\":\"globalRegions\",\"id\":7391,\"values\":[{\"name\":\"APAC\",\"id\":1002,\"parentId\":1002}],\"options\":null,\"multiEntitySupport\":false},\"globalCountries\":{\"name\":\"globalCountries\",\"id\":7392,\"values\":[{\"name\":\"Thailand\",\"id\":228,\"parentId\":1002}],\"options\":null,\"multiEntitySupport\":false},\"serviceCategory\":{\"name\":\"serviceCategory\",\"multiEntitySupport\":false},\"subHeader\":{\"name\":\"subHeader\",\"id\":12036,\"multiEntitySupport\":false},\"supplierAccess\":{\"name\":\"supplierAccess\",\"values\":false,\"multiEntitySupport\":false},\"stakeHolders\":{\"name\":\"stakeHolders\",\"values\":{\"rg_2016\":{\"values\":[{\"name\":\"Anay User\",\"id\":1044,\"type\":2,\"email\":\"srijan.samanta@sirionqa.office\",\"properties\":{\"Contact Number\":\"987654321\",\"Designation\":\"QA\",\"Default Tier\":\"View All\",\"Email\":\"srijan.samanta@sirionqa.office\",\"First Name\":\"Anay\",\"Time Zone:\":\"Asia/Kolkata (GMT +05:30)\",\"User Department\":\" - \",\"Legal Document\":\"Yes\",\"Last Name\":\"User\",\"Exclude From Filters\":\" - \",\"Business Case\":\"Yes\",\"Financial Document\":\"Yes\"}}],\"name\":\"rg_2016\",\"label\":\"Clause Manager\",\"userType\":[2,1,3,4]}},\"options\":null,\"multiEntitySupport\":false},\"canSupplierBeParent\":true,\"signatureAllowed\":{\"name\":\"signatureAllowed\",\"values\":false,\"multiEntitySupport\":false},\"subClauses\":{\"name\":\"subClauses\",\"values\":[],\"multiEntitySupport\":false},\"supplier\":{\"name\":\"supplier\",\"multiEntitySupport\":false},\"initiatives\":{\"name\":\"initiatives\",\"multiEntitySupport\":false},\"id\":{\"name\":\"id\",\"id\":7365,\"multiEntitySupport\":false},\"parentEntityIds\":{\"name\":\"parentEntityIds\",\"multiEntitySupport\":false},\"state\":{\"name\":\"state\",\"values\":{},\"multiEntitySupport\":false},\"actualParentEntityTypeId\":{\"name\":\"actualParentEntityTypeId\",\"multiEntitySupport\":false},\"contractingEntity\":{\"name\":\"contractingEntity\",\"id\":7371,\"options\":null,\"multiEntitySupport\":false},\"group\":{\"name\":\"group\",\"id\":11837,\"values\":{\"name\":\"Clause\",\"id\":1},\"options\":null,\"multiEntitySupport\":false},\"contractingHubs\":{\"name\":\"contractingHubs\",\"multiEntitySupport\":false},\"cycleTime\":{\"name\":\"cycleTime\",\"multiEntitySupport\":false},\"industryTypes\":{\"name\":\"industryTypes\",\"id\":7373,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"parentHalting\":{\"name\":\"parentHalting\",\"values\":false,\"multiEntitySupport\":false},\"weekType\":{\"name\":\"weekType\",\"multiEntitySupport\":false},\"stagingPrimaryKey\":{\"name\":\"stagingPrimaryKey\",\"multiEntitySupport\":false},\"timeZone\":{\"name\":\"timeZone\",\"multiEntitySupport\":false},\"dynamicMetadata\":{\"dyn106595\":{\"name\":\"dyn106595\",\"id\":106595,\"multiEntitySupport\":false},\"dyn106661\":{\"name\":\"dyn106661\",\"id\":106661,\"options\":null,\"multiEntitySupport\":false},\"dyn106560\":{\"name\":\"dyn106560\",\"id\":106560,\"multiEntitySupport\":false},\"dyn106576\":{\"name\":\"dyn106576\",\"id\":106576,\"multiEntitySupport\":false},\"dyn106614\":{\"name\":\"dyn106614\",\"id\":106614,\"multiEntitySupport\":false},\"dyn106645\":{\"name\":\"dyn106645\",\"id\":106645,\"multiEntitySupport\":false},\"dyn106678\":{\"name\":\"dyn106678\",\"id\":106678,\"options\":null,\"multiEntitySupport\":false}},\"formattedText\":{\"name\":\"formattedText\",\"multiEntitySupport\":false},\"leadTimes\":{\"name\":\"leadTimes\",\"multiEntitySupport\":false},\"addSubclauses\":{\"name\":\"addSubclauses\",\"id\":11229,\"values\":false,\"multiEntitySupport\":false},\"clientHoliday\":{\"name\":\"clientHoliday\",\"multiEntitySupport\":false},\"projectLevels\":{\"name\":\"projectLevels\",\"multiEntitySupport\":false},\"name\":{\"name\":\"name\",\"id\":7367,\"values\":\"API Automation 8031125\",\"multiEntitySupport\":false},\"rootInfo\":{\"name\":\"rootInfo\",\"multiEntitySupport\":false},\"overallRiskScore\":{\"name\":\"overallRiskScore\",\"multiEntitySupport\":false},\"forceTemplateRenewal\":{\"name\":\"forceTemplateRenewal\",\"id\":7383,\"multiEntitySupport\":false},\"projectId\":{\"name\":\"projectId\",\"multiEntitySupport\":false},\"status\":{\"name\":\"status\",\"id\":7366,\"values\":{},\"multiEntitySupport\":false},\"contractingMarkets\":{\"name\":\"contractingMarkets\",\"multiEntitySupport\":false},\"excludeWeekends\":{\"name\":\"excludeWeekends\",\"values\":false,\"multiEntitySupport\":false},\"companyPosition\":{\"name\":\"companyPosition\",\"id\":7374,\"options\":null,\"multiEntitySupport\":false},\"searchParam\":{\"size\":{\"name\":\"size\",\"values\":0,\"multiEntitySupport\":false},\"offset\":{\"name\":\"offset\",\"values\":0,\"multiEntitySupport\":false}},\"definitionCategories\":{\"name\":\"definitionCategories\",\"id\":11838,\"options\":null,\"multiEntitySupport\":false},\"termType\":{\"name\":\"termType\",\"id\":7372,\"options\":null,\"multiEntitySupport\":false},\"parentEntityType\":{\"name\":\"parentEntityType\",\"values\":{\"name\":\"Pre Signature\",\"id\":183},\"multiEntitySupport\":false},\"contracts\":{\"name\":\"contracts\",\"multiEntitySupport\":false},\"recipientClientEntities\":{\"name\":\"recipientClientEntities\",\"multiEntitySupport\":false},\"agreementTypes\":{\"name\":\"agreementTypes\",\"id\":7375,\"values\":[{\"name\":\"Services Agreement\",\"id\":1008}],\"options\":null,\"multiEntitySupport\":false},\"minTcv\":{\"name\":\"minTcv\",\"id\":7380,\"multiEntitySupport\":false},\"compareAllowed\":{\"name\":\"compareAllowed\",\"values\":false,\"multiEntitySupport\":false},\"tier\":{\"name\":\"tier\",\"multiEntitySupport\":false},\"adhocUser\":{\"firstName\":{\"name\":\"firstName\",\"id\":78,\"multiEntitySupport\":false},\"lastName\":{\"name\":\"lastName\",\"id\":79,\"multiEntitySupport\":false},\"loginId\":{\"name\":\"loginId\",\"id\":80,\"multiEntitySupport\":false},\"userType\":{\"name\":\"userType\",\"id\":83,\"options\":null,\"multiEntitySupport\":false},\"uniqueLoginId\":{\"name\":\"uniqueLoginId\",\"id\":82,\"multiEntitySupport\":false},\"email\":{\"name\":\"email\",\"id\":81,\"multiEntitySupport\":false}},\"vendorContractingParty\":{\"name\":\"vendorContractingParty\",\"multiEntitySupport\":false},\"riskTypes\":{\"name\":\"riskTypes\",\"id\":7389,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"draftEntity\":{\"name\":\"draftEntity\",\"values\":false,\"multiEntitySupport\":false},\"ageing\":{\"name\":\"ageing\",\"multiEntitySupport\":false},\"contractServices\":{\"name\":\"contractServices\",\"id\":7378,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"languageType\":{\"name\":\"languageType\",\"id\":12340,\"values\":{\"name\":\"English (English)\",\"id\":1},\"options\":null,\"multiEntitySupport\":false},\"actualParentEntityId\":{\"name\":\"actualParentEntityId\",\"multiEntitySupport\":false},\"sourceEntityTypeId\":{\"name\":\"sourceEntityTypeId\",\"multiEntitySupport\":false},\"filePath\":{\"name\":\"filePath\",\"multiEntitySupport\":false},\"headerLabel\":{\"name\":\"headerLabel\",\"id\":11464,\"multiEntitySupport\":false},\"recipientMarkets\":{\"name\":\"recipientMarkets\",\"id\":11846,\"values\":[],\"options\":null,\"multiEntitySupport\":false},\"addendums\":{\"name\":\"addendums\",\"values\":[],\"multiEntitySupport\":false},\"services\":{\"name\":\"services\",\"id\":11550,\"values\":[{\"name\":\"Network MNS\",\"id\":1005,\"parentId\":1002}],\"options\":null,\"multiEntitySupport\":false},\"contractCountries\":{\"name\":\"contractCountries\",\"multiEntitySupport\":false},\"clauseTags\":{\"name\":\"clauseTags\",\"id\":7382,\"multiEntitySupport\":false},\"parentEntityTypeId\":{\"name\":\"parentEntityTypeId\",\"values\":183,\"multiEntitySupport\":false},\"maxTcv\":{\"name\":\"maxTcv\",\"id\":7381,\"multiEntitySupport\":false},\"recipientCompanyCodes\":{\"name\":\"recipientCompanyCodes\",\"multiEntitySupport\":false},\"oldSystemId\":{\"name\":\"oldSystemId\",\"multiEntitySupport\":false},\"shortCodeId\":{\"name\":\"shortCodeId\",\"id\":7393,\"values\":\"CL08282\",\"multiEntitySupport\":false},\"formattingProperties\":{\"name\":\"formattingProperties\",\"id\":7388,\"multiEntitySupport\":false},\"excludeFromHoliday\":{\"name\":\"excludeFromHoliday\",\"values\":false,\"multiEntitySupport\":false},\"sourceEntityId\":{\"name\":\"sourceEntityId\",\"multiEntitySupport\":false},\"clauseText\":{\"name\":\"clauseText\",\"id\":7386,\"values\":{\"text\":\""+textInClause+"\",\"htmlText\":\"<style>.table-bordered, .table-bordered>tbody>tr>td, .table-bordered>tbody>tr>th, .table-bordered>tfoot>tr>td, .table-bordered>tfoot>tr>th, .table-bordered>thead>tr>td, .table-bordered>thead>tr>th{t border: 1px solid #ddd;      border-collapse: collapse;}.table {   width: 100%;    max-width: 100%;    margin-bottom: 20px;}</style><p>"+textInClause+"</p>\"},\"multiEntitySupport\":false},\"entityTypeId\":{\"name\":\"entityTypeId\",\"values\":138,\"multiEntitySupport\":false},\"comment\":{\"requestedBy\":{\"name\":\"requestedBy\",\"id\":12244,\"options\":null,\"multiEntitySupport\":false},\"shareWithSupplier\":{\"name\":\"shareWithSupplier\",\"id\":12409,\"multiEntitySupport\":false},\"comments\":{\"name\":\"comments\",\"id\":86,\"multiEntitySupport\":false},\"documentTags\":{\"name\":\"documentTags\",\"id\":12428,\"options\":null,\"multiEntitySupport\":false},\"invoiceCopy\":{\"name\":\"invoiceCopy\",\"values\":false,\"multiEntitySupport\":false},\"draft\":{\"name\":\"draft\",\"multiEntitySupport\":false},\"actualDate\":{\"name\":\"actualDate\",\"id\":12243,\"multiEntitySupport\":false},\"privateCommunication\":{\"name\":\"privateCommunication\",\"id\":12242,\"multiEntitySupport\":false},\"changeRequest\":{\"name\":\"changeRequest\",\"id\":12246,\"options\":null,\"multiEntitySupport\":false},\"workOrderRequest\":{\"name\":\"workOrderRequest\",\"id\":12247,\"multiEntitySupport\":false},\"commentDocuments\":{\"values\":[]}},\"relations\":{\"name\":\"relations\",\"multiEntitySupport\":false},\"category\":{\"name\":\"category\",\"id\":7368,\"values\":{\"name\":\"Limited Warranty\",\"id\":1200},\"options\":null,\"multiEntitySupport\":false},\"contractRegions\":{\"name\":\"contractRegions\",\"multiEntitySupport\":false},\"clauseVersion\":{\"name\":\"clauseVersion\",\"id\":12657,\"values\":\"1.0\",\"multiEntitySupport\":false},\"contractingCompanyCodes\":{\"name\":\"contractingCompanyCodes\",\"multiEntitySupport\":false},\"dyn106595\":{\"name\":\"dyn106595\",\"id\":106595,\"multiEntitySupport\":false},\"dyn106661\":{\"name\":\"dyn106661\",\"id\":106661,\"options\":null,\"multiEntitySupport\":false},\"dyn106560\":{\"name\":\"dyn106560\",\"id\":106560,\"multiEntitySupport\":false},\"dyn106576\":{\"name\":\"dyn106576\",\"id\":106576,\"multiEntitySupport\":false},\"dyn106614\":{\"name\":\"dyn106614\",\"id\":106614,\"multiEntitySupport\":false},\"dyn106645\":{\"name\":\"dyn106645\",\"id\":106645,\"multiEntitySupport\":false},\"dyn106678\":{\"name\":\"dyn106678\",\"id\":106678,\"options\":null,\"multiEntitySupport\":false}}}}";
    }

    public int createClauseAndGetNewId(String textInClause, CustomAssert customAssert){
        int entityId = -1;
        String createResponse;
       try{
           Create create = new Create();
           create.hitCreate(entityName, clausePayload(textInClause));
           createResponse = create.getCreateJsonStr();
           if(ParseJsonResponse.validJsonResponse(createResponse)){
               JSONObject jsonObject = new JSONObject(createResponse);
               String createStatus = jsonObject.getJSONObject("header").getJSONObject("response").getString("status").trim();
               logger.info("Create Status for Entity :  {}", createStatus);
               if (createStatus.equalsIgnoreCase("success"))
                   entityId = CreateEntity.getNewEntityId(createResponse, "clauses");
               logger.info("Id of the Entity Created is : {}",entityId);
           }else{
               logger.error("Create response for Clause is not a valid JSON");
               customAssert.assertTrue(false,"Create response for Clause is not a valid JSON");
           }
       }catch(Exception e){
           logger.error("Exception {} occurred while creating the Clause",e.getMessage());
           customAssert.assertTrue(false,"Exception "+e.getMessage()+" occurred while creating the Clause");
       }
       return entityId;
    }

    public String showPageResponseTextForClause(String inputText, int clauseId, CustomAssert customAssert){
       Show show = new Show();
        String clauseText = null;
        try{

            show.hitShowGetAPI(138,clauseId);
            String showResponse = show.getShowJsonStr();
            if(ParseJsonResponse.validJsonResponse(showResponse)){
                JSONObject jsonObject = new JSONObject(showResponse);
                if(inputText!=null)
                    clauseText = jsonObject.getJSONObject("body").getJSONObject("data").getJSONObject("clauseText").getJSONObject("values").getString("htmlText").split("</style><p>")[1].split("</p>")[0].trim();
                else
                    clauseText = jsonObject.getJSONObject("body").getJSONObject("data").getJSONObject("clauseText").getJSONObject("values").getString("htmlText").trim();
            }else{
                logger.error("Show Page Response is not a valid JSON Response");
                customAssert.assertTrue(false,"Show Page Response is not a valid JSON Response");
            }
        }catch(Exception e){
            logger.error("Exception {} occurred while fetching the Show Page Response for ClauseId {}",e.getMessage(),clauseId);
            customAssert.assertTrue(false,"Exception "+e.getMessage()+" occurred while fetching the Show Page Response for ClauseId "+clauseId);
        }
        return clauseText;
    }
}